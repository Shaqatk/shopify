{% comment %}
  A24 Pricing Display
  
  Shows pricing in the left column:
  - Regular price (large, bold)
  - Member/subscription price (grey)
  - Savings text with "Join us" link
{% endcomment %}

{% liquid
  assign product = closest.product
  assign variant = product.selected_or_first_available_variant
  
  # Check if product has selling plans (subscriptions)
  assign has_selling_plans = false
  assign monthly_plan = null
  if product.selling_plan_groups.size > 0
    assign has_selling_plans = true
    # Find monthly selling plan
    for selling_plan_group in product.selling_plan_groups
      for selling_plan in selling_plan_group.selling_plans
        if selling_plan.name contains 'month' or selling_plan.name contains 'Month'
          assign monthly_plan = selling_plan
          break
        endif
      endfor
    endfor
  endif
  
  # Calculate subscription price
  if monthly_plan
    assign subscription_price = variant.price | times: monthly_plan.price_adjustments.first.value | divided_by: 100.0
    assign savings_percent = monthly_plan.price_adjustments.first.value | abs
  endif
%}

<div class="a24-pricing-display" data-a24-pricing>
  {%- comment -%} Price Row - All prices on same line like A24 {%- endcomment -%}
  <div class="a24-pricing-display__row">
    <span class="a24-pricing-display__regular">{{ variant.price | money }}</span>
    {% if has_selling_plans and monthly_plan %}
      <span class="a24-pricing-display__member-price">{{ subscription_price | money }}</span>
      <span class="a24-pricing-display__savings">
        Members save {{ savings_percent }}% 
        <a href="/pages/aaa24" class="a24-pricing-display__join-link">Join us →</a>
      </span>
    {% endif %}
  </div>
</div>

{% stylesheet %}
  /* ============================================
     A24 Pricing Display (Left Column)
     Matches A24: $22  $19.80  Members save 10% Join us →
     ============================================ */
  
  .a24-pricing-display {
    margin-bottom: 32px;
  }

  /* Price Row - horizontal layout */
  .a24-pricing-display__row {
    display: flex;
    flex-wrap: wrap;
    align-items: baseline;
    gap: 12px;
  }

  /* Regular Price - largest */
  .a24-pricing-display__regular {
    font-size: 1.75rem; /* 28px - matches A24 */
    font-weight: 400;
    letter-spacing: -0.02em;
    line-height: 1;
    color: #000000;
  }

  /* Member/Subscription Price - grey */
  .a24-pricing-display__member-price {
    font-size: 1.25rem; /* 20px */
    font-weight: 400;
    letter-spacing: -0.02em;
    line-height: 1;
    color: #787878;
  }

  /* Savings Text - small uppercase */
  .a24-pricing-display__savings {
    font-size: 0.625rem; /* 10px */
    font-weight: 500;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    line-height: 1;
    color: #787878;
  }

  .a24-pricing-display__join-link {
    color: #787878;
    text-decoration: none;
    border-bottom: 1px solid #787878;
    transition: color 0.2s ease, border-color 0.2s ease;
  }

  .a24-pricing-display__join-link:hover {
    color: #000000;
    border-color: #000000;
  }

  /* Mobile Adjustments */
  @media screen and (max-width: 749px) {
    .a24-pricing-display {
      margin-bottom: 24px;
    }

    .a24-pricing-display__row {
      gap: 8px;
    }

    .a24-pricing-display__regular {
      font-size: 1.5rem; /* 24px */
    }

    .a24-pricing-display__member-price {
      font-size: 1rem; /* 16px */
    }
  }
{% endstylesheet %}
